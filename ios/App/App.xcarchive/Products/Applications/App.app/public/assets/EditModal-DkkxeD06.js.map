{"version":3,"file":"EditModal-DkkxeD06.js","sources":["../../src/components/VoiceRecorder.jsx","../../src/components/EditModal.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\n\nconst VoiceRecorder = ({ currentAudio, onSave, onRemove }) => {\n    const [isRecording, setIsRecording] = useState(false);\n    const [audioUrl, setAudioUrl] = useState(currentAudio || null);\n    const [recordingTime, setRecordingTime] = useState(0);\n    const mediaRecorderRef = useRef(null);\n    const chunksRef = useRef([]);\n    const timerRef = useRef(null);\n\n    useEffect(() => {\n        if (currentAudio !== audioUrl) {\n            setTimeout(() => setAudioUrl(currentAudio || null), 0);\n        }\n    }, [currentAudio, audioUrl]);\n\n    const getSupportedMimeType = () => {\n        const types = ['audio/webm;codecs=opus', 'audio/webm', 'audio/mp4', 'audio/ogg;codecs=opus', 'audio/wav'];\n        for (const type of types) { if (MediaRecorder.isTypeSupported(type)) return type; }\n        return '';\n    };\n\n    const startRecording = async () => {\n        try {\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) { alert('Not supported'); return; }\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const mimeType = getSupportedMimeType();\n            try { mediaRecorderRef.current = new MediaRecorder(stream, mimeType ? { mimeType } : {}); }\n            catch { mediaRecorderRef.current = new MediaRecorder(stream); }\n            chunksRef.current = [];\n            mediaRecorderRef.current.ondataavailable = (e) => { if (e.data.size > 0) chunksRef.current.push(e.data); };\n            mediaRecorderRef.current.onstop = () => {\n                const blob = new Blob(chunksRef.current, { type: mediaRecorderRef.current.mimeType || 'audio/webm' });\n                const reader = new FileReader();\n                reader.onloadend = () => { setAudioUrl(reader.result); onSave(reader.result); };\n                reader.readAsDataURL(blob);\n                stream.getTracks().forEach(track => track.stop());\n            };\n            mediaRecorderRef.current.start(); setIsRecording(true); setRecordingTime(0);\n            timerRef.current = setInterval(() => setRecordingTime(t => t + 1), 1000);\n        } catch (error) { console.error(error); alert('Allow mic access'); }\n    };\n\n    const stopRecording = () => { if (mediaRecorderRef.current && isRecording) { mediaRecorderRef.current.stop(); setIsRecording(false); clearInterval(timerRef.current); } };\n    const playAudio = () => { if (audioUrl) new Audio(audioUrl).play(); };\n    const handleRemove = () => { setAudioUrl(null); onRemove(); };\n    const formatTime = (s) => `${Math.floor(s / 60)}:${(s % 60).toString().padStart(2, '0')}`;\n\n    return (\n        <div style={{ background: '#f8f8f8', padding: '0.75rem', borderRadius: '0.75rem', display: 'flex', flexDirection: 'column', gap: '0.625rem' }}>\n            <div role=\"status\" aria-live=\"polite\" style={{ position: 'absolute', width: '1px', height: '1px', padding: '0', margin: '-1px', overflow: 'hidden', clip: 'rect(0, 0, 0, 0)', whiteSpace: 'nowrap', border: '0' }}>\n                {isRecording ? 'Recording started' : audioUrl && !isRecording ? 'Recording stopped' : ''}\n            </div>\n            <label style={{ fontWeight: 'bold', fontSize: '0.9rem' }}>Custom Voice</label>\n            {isRecording ? (\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.625rem' }}>\n                    <div style={{ width: '0.75rem', height: '0.75rem', borderRadius: '50%', background: '#FF3B30', animation: 'pulse 1s infinite' }} />\n                    <span style={{ flex: 1, fontWeight: 'bold', color: '#FF3B30' }}>Recording... {formatTime(recordingTime)}</span>\n                    <button onClick={stopRecording} style={{ padding: '0.5rem 1rem', background: '#FF3B30', color: 'white', border: 'none', borderRadius: '0.5rem', cursor: 'pointer', fontWeight: 'bold', minHeight: '2.75rem' }}>‚èπ Stop</button>\n                </div>\n            ) : audioUrl ? (\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    <button onClick={playAudio} style={{ flex: 1, padding: '0.5rem', background: '#007AFF', color: 'white', border: 'none', borderRadius: '0.5rem', cursor: 'pointer', minHeight: '2.75rem' }}>‚ñ∂Ô∏è Play</button>\n                    <button onClick={startRecording} style={{ flex: 1, padding: '0.5rem', background: '#34C759', color: 'white', border: 'none', borderRadius: '0.5rem', cursor: 'pointer', minHeight: '2.75rem' }}>üîÑ Re-record</button>\n                    <button onClick={handleRemove} style={{ padding: '0.5rem 0.75rem', background: '#FF3B30', color: 'white', border: 'none', borderRadius: '0.5rem', cursor: 'pointer', minHeight: '2.75rem', minWidth: '2.75rem' }}>üóëÔ∏è</button>\n                </div>\n            ) : (\n                <button onClick={startRecording} style={{ padding: '0.625rem', background: '#FF3B30', color: 'white', border: 'none', borderRadius: '0.5rem', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem', minHeight: '2.75rem' }}>üé§ Record Voice</button>\n            )}\n        </div>\n    );\n};\n\nexport default VoiceRecorder;","import { useState, useEffect, useRef } from 'react';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport VoiceRecorder from './VoiceRecorder';\nimport MemojiPicker from './MemojiPicker';\nimport { saveMedia, getMedia, deleteMedia } from '../utils/db';\n\nconst EditModal = ({ isOpen, onClose, onSave, onDelete, onOpenEmojiPicker, item, triggerPaywall }) => {\n    const [word, setWord] = useState('');\n    const [icon, setIcon] = useState('');\n    const [bgColor, setBgColor] = useState('');\n    const [viewMode, setViewMode] = useState('grid');\n    const [customAudio, setCustomAudio] = useState(null);\n    const [isImage, setIsImage] = useState(false);\n    const [processing, setProcessing] = useState(false);\n    const [showMemojiPicker, setShowMemojiPicker] = useState(false);\n    const [characterConfig, setCharacterConfig] = useState(null);\n    const fileInputRef = useRef(null);\n    const cameraInputRef = useRef(null);\n    const lastItemIdRef = useRef(null);\n\n    useEffect(() => {\n        if (isOpen && item && item.id !== lastItemIdRef.current) {\n            lastItemIdRef.current = item.id;\n            \n            const loadData = async () => {\n                let resolvedIcon = item.icon;\n                let resolvedAudio = item.customAudio;\n\n                if (typeof item.icon === 'string' && item.icon.startsWith('db:')) {\n                    const mediaId = item.icon.split(':')[1];\n                    resolvedIcon = await getMedia(mediaId);\n                }\n\n                if (typeof item.customAudio === 'string' && item.customAudio.startsWith('db:')) {\n                    const mediaId = item.customAudio.split(':')[1];\n                    resolvedAudio = await getMedia(mediaId);\n                }\n\n                setWord(item.word); \n                setIcon(resolvedIcon); \n                setBgColor(item.bgColor || ''); \n                setViewMode(item.viewMode || 'grid'); \n                setCustomAudio(resolvedAudio); \n                setCharacterConfig(item.characterConfig || null);\n                setIsImage(typeof resolvedIcon === 'string' && (resolvedIcon.startsWith('/') || resolvedIcon.startsWith('data:') || resolvedIcon.includes('.')));\n            };\n\n            loadData();\n        }\n    }, [isOpen, item]);\n\n    const handleFileChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            processImage(file);\n        }\n    };\n\n    const processImage = (source) => {\n        if (source instanceof Blob) {\n            setProcessing(true);\n            const reader = new FileReader();\n            reader.onload = (event) => {\n                const img = new Image();\n                img.onload = () => {\n                    const canvas = document.createElement('canvas');\n                    const maxSize = 512; // Increased for better quality\n                    let width = img.width, height = img.height;\n                    if (width > height) { if (width > maxSize) { height *= maxSize / width; width = maxSize; } }\n                    else { if (height > maxSize) { width *= maxSize / height; height = maxSize; } }\n                    canvas.width = width; canvas.height = height;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(img, 0, 0, width, height);\n                    setIcon(canvas.toDataURL('image/jpeg', 0.7)); // Balanced compression\n                    setIsImage(true);\n                    setProcessing(false);\n                };\n                img.onerror = () => setProcessing(false);\n                img.src = event.target.result;\n            };\n            reader.onerror = () => setProcessing(false);\n            reader.readAsDataURL(source);\n        } else {\n            // If it's already a data URL or path\n            setIcon(source);\n            setIsImage(true);\n        }\n    };\n\n    const takePhoto = async (source = CameraSource.Prompt) => {\n        try {\n            const image = await Camera.getPhoto({\n                quality: 90,\n                allowEditing: true,\n                resultType: CameraResultType.DataUrl,\n                source: source\n            });\n            if (image && image.dataUrl) {\n                setProcessing(true);\n                // Process the image to ensure it's resized correctly for performance\n                const img = new Image();\n                img.onload = () => {\n                    const canvas = document.createElement('canvas');\n                    const maxSize = 512;\n                    let width = img.width, height = img.height;\n                    if (width > height) { if (width > maxSize) { height *= maxSize / width; width = maxSize; } }\n                    else { if (height > maxSize) { width *= maxSize / height; height = maxSize; } }\n                    canvas.width = width; canvas.height = height;\n                    canvas.getContext('2d').drawImage(img, 0, 0, width, height);\n                    setIcon(canvas.toDataURL('image/jpeg', 0.7));\n                    setIsImage(true);\n                    setProcessing(false);\n                };\n                img.onerror = () => setProcessing(false);\n                img.src = image.dataUrl;\n            }\n        } catch (error) {\n            console.error('Camera error:', error);\n            setProcessing(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"ios-bottom-sheet-overlay\" onClick={onClose}>\n            <div className=\"ios-bottom-sheet\" onClick={e => e.stopPropagation()}>\n                <div className=\"ios-sheet-header\">\n                    <button className=\"ios-cancel-button\" onClick={onClose}>Cancel</button>\n                    <h2 className=\"ios-sheet-title\">{item?.type === 'folder' ? 'Edit Folder' : 'Edit Button'}</h2>\n                    <button \n                        className=\"ios-done-button\" \n                        disabled={processing}\n                        style={{ opacity: processing ? 0.5 : 1 }}\n                        onClick={async () => { \n                            let finalIcon = icon;\n                            let finalAudio = customAudio;\n\n                            // Move heavy icon to IndexedDB if it's a new data URL\n                            if (typeof icon === 'string' && icon.startsWith('data:')) {\n                                // Cleanup old entry if it was from DB\n                                if (typeof item.icon === 'string' && item.icon.startsWith('db:')) {\n                                    const oldId = item.icon.split(':')[1];\n                                    await deleteMedia(oldId);\n                                }\n                                const mediaId = `img-${Date.now()}`;\n                                await saveMedia(mediaId, icon);\n                                finalIcon = `db:${mediaId}`;\n                            }\n\n                            // Move heavy audio to IndexedDB if it's a new data URL\n                            if (typeof customAudio === 'string' && customAudio.startsWith('data:')) {\n                                // Cleanup old entry if it was from DB\n                                if (typeof item.customAudio === 'string' && item.customAudio.startsWith('db:')) {\n                                    const oldId = item.customAudio.split(':')[1];\n                                    await deleteMedia(oldId);\n                                }\n                                const audioId = `audio-${Date.now()}`;\n                                await saveMedia(audioId, customAudio);\n                                finalAudio = `db:${audioId}`;\n                            }\n\n                            onSave(word, finalIcon, bgColor, viewMode, finalAudio, characterConfig); \n                            onClose(); \n                        }}\n                    >\n                        {processing ? '...' : 'Done'}\n                    </button>\n                </div>\n                \n                <div className=\"ios-sheet-content\" style={{ background: '#F2F2F7' }}>\n                    <div className=\"ios-setting-group-header\">Content</div>\n                    <div className=\"ios-setting-card\">\n                        <div className=\"ios-row\">\n                            <span style={{ fontWeight: 600 }}>Label</span>\n                            <input \n                                type=\"text\" \n                                value={word} \n                                onChange={(e) => setWord(e.target.value)} \n                                style={{ border: 'none', textAlign: 'right', fontSize: '1.0625rem', outline: 'none', background: 'transparent', flex: 1, minHeight: '2.75rem' }}\n                                placeholder=\"Enter label\"\n                            />\n                        </div>\n                        {item?.type === 'folder' && (\n                            <div className=\"ios-row\" style={{ flexDirection: 'column', alignItems: 'stretch', gap: '0.625rem', padding: '1rem' }}>\n                                <span style={{ fontWeight: 600, fontSize: '0.8125rem', textTransform: 'uppercase', color: '#6e6e73' }}>View Mode</span>\n                                <div className=\"ios-segmented-control\" style={{ marginBottom: 0 }}>\n                                    <div \n                                        className=\"selection-pill\" \n                                        style={{ \n                                            width: 'calc(50% - 4px)',\n                                            transform: viewMode === 'grid' ? 'translateX(0)' : 'translateX(100%)' \n                                        }} \n                                    />\n                                    <button onClick={() => setViewMode('grid')} style={{ minHeight: '2.75rem' }}>Grid</button>\n                                    <button onClick={() => setViewMode('schedule')} style={{ minHeight: '2.75rem' }}>Schedule</button>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"ios-setting-group-header\">Appearance</div>\n                    <div className=\"ios-setting-card\">\n                        <div style={{ padding: '1.25rem', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem' }}>\n                            <div style={{ width: '6.25rem', height: '6.25rem', borderRadius: '22%', background: bgColor || 'white', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '3.5rem', overflow: 'hidden', boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }}>\n                                {isImage ? <img src={icon} alt=\"preview\" style={{ width: '100%', height: '100%', objectFit: 'contain' }} /> : icon}\n                            </div>\n                            \n                            <div style={{ display: 'flex', gap: '0.75rem', flexWrap: 'wrap', justifyContent: 'center' }}>\n                                {['', '#FF3B30', '#FF9500', '#FFCC00', '#34C759', '#007AFF', '#5556D6', '#AF52DE'].map(color => (\n                                    <button \n                                        key={color} \n                                        onClick={() => setBgColor(color)} \n                                        style={{ \n                                            width: '2.75rem', height: '2.75rem', borderRadius: '50%', \n                                            background: color || 'white', \n                                            border: bgColor === color ? '3px solid #007AFF' : '1px solid #ddd', \n                                            cursor: 'pointer',\n                                            boxShadow: bgColor === color ? '0 0 0 2px white' : 'none'\n                                        }}\n                                    />\n                                ))}\n                            </div>\n                        </div>\n                        <div className=\"ios-row\" onClick={() => onOpenEmojiPicker(setWord, (ni, isImg) => { setIcon(ni); setIsImage(!!isImg); })} style={{ minHeight: '3rem' }}>\n                            <span>Choose from Library</span>\n                            <span className=\"ios-chevron\">‚Ä∫</span>\n                        </div>\n                        <div className=\"ios-row\" onClick={() => setShowMemojiPicker(true)} style={{ minHeight: '3rem' }}>\n                            <span>Select Character</span>\n                            <span className=\"ios-chevron\">‚Ä∫</span>\n                        </div>\n                        <div className=\"ios-row\" onClick={() => takePhoto(CameraSource.Camera)} style={{ minHeight: '3rem' }}>\n                            <span>üì∑ Take Photo</span>\n                            <span className=\"ios-chevron\">‚Ä∫</span>\n                        </div>\n                        <div className=\"ios-row\" onClick={() => takePhoto(CameraSource.Photos)} style={{ minHeight: '3rem' }}>\n                            <span>üñºÔ∏è Choose from Gallery</span>\n                            <span className=\"ios-chevron\">‚Ä∫</span>\n                        </div>\n                    </div>\n\n                    <div className=\"ios-setting-group-header\">Media</div>\n                    <div className=\"ios-setting-card\">\n                        <div style={{ padding: '0.3125rem' }}>\n                            {item?.type !== 'folder' && <VoiceRecorder currentAudio={customAudio} onSave={(audio) => setCustomAudio(audio)} onRemove={() => setCustomAudio(null)}/>}\n                        </div>\n                    </div>\n\n                    <div style={{ marginTop: '1.25rem' }}>\n                        <button \n                            onClick={() => { if (window.confirm(\"Delete this item?\")) { onDelete(); onClose(); } }} \n                            className=\"ios-row\" \n                            style={{ width: '100%', border: 'none', borderRadius: '0.75rem', justifyContent: 'center', minHeight: '3rem' }}\n                        >\n                            <span style={{ color: '#FF3B30', fontWeight: 600 }}>Delete Item</span>\n                        </button>\n                    </div>\n\n                    <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} accept=\"image/*\" style={{ display: 'none' }}/>\n                    <input type=\"file\" ref={cameraInputRef} onChange={handleFileChange} accept=\"image/*\" capture=\"environment\" style={{ display: 'none' }}/>\n                </div>\n\n                {showMemojiPicker && (\n                    <MemojiPicker \n                        onSelect={(newIcon, config) => { \n                            setIcon(newIcon); \n                            setCharacterConfig(config); \n                            if (config.name) setWord(config.name); \n                            setIsImage(true); \n                            setShowMemojiPicker(false); \n                        }} \n                        onClose={() => setShowMemojiPicker(false)}\n                    />\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default EditModal;\n"],"names":["VoiceRecorder","currentAudio","onSave","onRemove","isRecording","setIsRecording","useState","audioUrl","setAudioUrl","recordingTime","setRecordingTime","mediaRecorderRef","useRef","chunksRef","timerRef","useEffect","getSupportedMimeType","types","type","startRecording","stream","mimeType","e","blob","reader","track","t","error","stopRecording","playAudio","handleRemove","formatTime","s","jsx","jsxs","EditModal","isOpen","onClose","onDelete","onOpenEmojiPicker","item","triggerPaywall","word","setWord","icon","setIcon","bgColor","setBgColor","viewMode","setViewMode","customAudio","setCustomAudio","isImage","setIsImage","processing","setProcessing","showMemojiPicker","setShowMemojiPicker","characterConfig","setCharacterConfig","fileInputRef","cameraInputRef","lastItemIdRef","resolvedIcon","resolvedAudio","mediaId","getMedia","handleFileChange","file","processImage","source","event","img","canvas","maxSize","width","height","takePhoto","CameraSource","image","Camera","CameraResultType","finalIcon","finalAudio","oldId","deleteMedia","saveMedia","audioId","color","ni","isImg","audio","MemojiPicker","newIcon","config"],"mappings":"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"}