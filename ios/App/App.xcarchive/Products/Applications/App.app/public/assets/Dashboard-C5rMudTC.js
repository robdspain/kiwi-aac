const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DuWVAYsy.js","assets/dnd-kit-CCR-p5D8.js","assets/vendor-024GqXKi.js","assets/index-U9_cTYFC.css"])))=>i.map(i=>d[i]);
import{g as D,a as P,b as R,j as e,_ as T,e as z,c as n,d as j,f as $}from"./index-DuWVAYsy.js";import"./dnd-kit-CCR-p5D8.js";import"./vendor-024GqXKi.js";const F=({onClose:w,progressData:y,currentLevel:a,rootItems:W=[]})=>{const c=y?.trials||[],u=c.filter(t=>!t.isPrompted).length,C=c.filter(t=>t.isPrompted).length,S=c.length,k=S>0?Math.round(u/S*100):0,v=D(5),N=P(7),g=R(),A=Math.max(...N.map(t=>t.clicks),1),b=W.filter(t=>t.bgColor==="#FFF3E0"&&t.usageCount>0).sort((t,i)=>(i.usageCount||0)-(t.usageCount||0)).slice(0,10),f=b.reduce((t,i)=>t+(i.usageCount||0),0),I=async()=>{const t=a?j(a):null,i=a?n(a):null,o=$(1),r=`
ðŸ“Š Kiwi Voice Progress Report
---------------------------
ðŸ“ Current Level: ${a||"Not set"} ${t?.name||""}
${i?`ðŸŽ¯ Stage ${Math.floor(a)}: ${i.name}`:""}
ðŸ“ˆ Total Interactions: ${g.totalClicks}
ðŸ§  Independence Rate: ${k}%
ðŸ”¥ Current Streak: ${y.currentStreak} trials
ðŸ† Top Words: ${v.slice(0,3).map(s=>s.word).join(", ")}
ðŸ’¬ Last Sentence: "${o[0]?.text||"None"}"

Communication is growing! ðŸ¥
        `.trim();if(navigator.share)try{await navigator.share({title:"Kiwi Voice Progress Report",text:r})}catch(s){console.log("Share failed:",s)}else navigator.clipboard.writeText(r),alert("Report copied to clipboard!")};return e.jsx("div",{className:"dashboard-modal",children:e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"ðŸ“Š Dashboard"}),e.jsxs("div",{className:"dashboard-actions",children:[e.jsx("button",{onClick:I,className:"dashboard-btn primary",children:"ðŸ“¤ Share Progress"}),e.jsx("button",{onClick:async()=>{try{const{checkExportAnalytics:t}=await T(async()=>{const{checkExportAnalytics:o}=await import("./index-DuWVAYsy.js").then(r=>r.r);return{checkExportAnalytics:o}},__vite__mapDeps([0,1,2,3]));await t()&&z()}catch(t){console.error("Failed to check export access:",t),z()}},className:"dashboard-btn success",children:"ðŸ“¥ Export CSV"}),e.jsx("button",{onClick:w,className:"dashboard-btn secondary",children:"Close"})]})]}),e.jsx("h2",{className:"dashboard-section-title",children:"ðŸŽ¯ Level Progress"}),(()=>{const t={};(y?.trials||[]).forEach(r=>{const s=r.level||r.phase;t[s]||(t[s]={attempts:0,independent:0,prompted:0,firstAttempt:r.timestamp,lastAttempt:r.timestamp}),t[s].attempts++,r.isPrompted?t[s].prompted++:t[s].independent++,r.timestamp<t[s].firstAttempt&&(t[s].firstAttempt=r.timestamp),r.timestamp>t[s].lastAttempt&&(t[s].lastAttempt=r.timestamp)});const o=Object.keys(t).map(r=>parseFloat(r)).filter(r=>!isNaN(r)).sort((r,s)=>r-s);return o.length===0?e.jsxs("div",{className:"dashboard-card",style:{textAlign:"center",background:"var(--gray-light)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"ðŸ“"}),e.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:"No level progress data yet. Complete some trials to see progress here!"})]}):e.jsxs("div",{style:{marginBottom:"1.875rem"},children:[a&&e.jsxs("div",{className:"dashboard-card",style:{background:`linear-gradient(135deg, ${n(a).color}10, ${n(a).color}20)`,border:`0.125rem solid ${n(a).color}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"0.25rem",fontWeight:600},children:"Current Level"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:n(a).color},children:[n(a).icon," Level ",a]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-primary)",fontWeight:500},children:j(a)?.name})]}),t[a]&&e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:n(a).color},children:t[a].attempts}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontWeight:600},children:"attempts"})]})]}),t[a]&&e.jsxs("div",{style:{display:"flex",gap:"0.9375rem",marginTop:"0.9375rem",background:"var(--card-bg)",padding:"0.75rem",borderRadius:"0.625rem",border:"1px solid var(--gray-border)"},children:[e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--success)"},children:t[a].independent}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"Independent"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--warning)"},children:t[a].prompted}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"Prompted"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--primary-dark)"},children:[t[a].attempts>0?Math.round(t[a].independent/t[a].attempts*100):0,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"Accuracy"})]})]})]}),e.jsxs("div",{className:"dashboard-card",style:{background:"var(--gray-light)"},children:[e.jsx("h3",{style:{margin:"0 0 0.9375rem 0",fontSize:"1rem",color:"var(--text-primary)"},children:"Level History"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:o.map(r=>{const s=t[r],d=j(r),l=n(r),h=s.attempts>0?Math.round(s.independent/s.attempts*100):0,p=s.lastAttempt&&s.firstAttempt?Math.round((s.lastAttempt-s.firstAttempt)/(1e3*60*60*24)):0,m=d&&s.attempts>=(d.threshold||20)&&(!d.accuracy||h>=d.accuracy),x=r===a;return e.jsxs("div",{style:{background:"var(--card-bg)",padding:"0.75rem 0.9375rem",borderRadius:"0.625rem",display:"flex",alignItems:"center",gap:"0.75rem",border:x?`0.125rem solid ${l?.color||"var(--primary-dark)"}`:"1px solid var(--gray-border)"},children:[e.jsx("div",{style:{width:"2.25rem",height:"2.25rem",borderRadius:"50%",background:m?"var(--success)":(l?.color||"var(--gray-border)")+"20",display:"flex",alignItems:"center",justifyContent:"center",fontSize:m?"1rem":"0.9rem",color:m?"white":l?.color||"var(--text-muted)"},children:m?"âœ“":l?.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"700",fontSize:"0.9rem",color:"var(--text-primary)"},children:["Level ",r," ",d?.name&&`â€“ ${d.name}`]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:500},children:[s.attempts," attempts â€¢ ",h,"% accuracy",p>0&&` â€¢ ${p} day${p!==1?"s":""}`]})]}),e.jsx("div",{style:{textAlign:"right"},children:m?e.jsx("span",{style:{background:"var(--success)",color:"white",padding:"0.25rem 0.625rem",borderRadius:"0.75rem",fontSize:"0.75rem",fontWeight:"700"},children:"Passed"}):x?e.jsx("span",{style:{background:l?.color||"var(--primary-dark)",color:"white",padding:"0.25rem 0.625rem",borderRadius:"0.75rem",fontSize:"0.75rem",fontWeight:"700"},children:"Current"}):e.jsx("span",{style:{background:"var(--gray-light)",color:"var(--text-secondary)",padding:"0.25rem 0.625rem",borderRadius:"0.75rem",fontSize:"0.75rem",fontWeight:600,border:"1px solid var(--gray-border)"},children:"In Progress"})})]},r)})})]})]})})(),e.jsx("h2",{className:"dashboard-section-title",children:"ðŸ“ˆ Usage Overview"}),e.jsxs("div",{className:"dashboard-stat-grid",children:[e.jsxs("div",{className:"dashboard-stat-card",children:[e.jsx("div",{className:"dashboard-stat-value",children:g.totalClicks}),e.jsx("div",{className:"dashboard-stat-label",children:"Total Clicks"})]}),e.jsxs("div",{className:"dashboard-stat-card",children:[e.jsx("div",{className:"dashboard-stat-value",children:g.uniqueItems}),e.jsx("div",{className:"dashboard-stat-label",children:"Items Used"})]}),e.jsxs("div",{className:"dashboard-stat-card",children:[e.jsx("div",{className:"dashboard-stat-value",children:g.totalSessions}),e.jsx("div",{className:"dashboard-stat-label",children:"Sessions"})]}),e.jsxs("div",{className:"dashboard-stat-card",children:[e.jsxs("div",{className:"dashboard-stat-value",children:[g.avgSessionTime,"m"]}),e.jsx("div",{className:"dashboard-stat-label",children:"Avg Session"})]})]}),e.jsxs("div",{className:"dashboard-card",style:{background:"var(--gray-light)"},children:[e.jsx("h3",{style:{margin:"0 0 0.9375rem 0",fontSize:"1rem",color:"var(--text-primary)"},children:"Weekly Activity"}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem",height:"6.25rem"},children:N.map((t,i)=>e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:"100%",height:`${t.clicks/A*5}rem`,background:"var(--btn-primary-bg)",borderRadius:"0.3125rem 0.3125rem 0 0",minHeight:"0.25rem"}}),e.jsx("span",{style:{fontSize:"0.7rem",marginTop:"0.3125rem",color:"var(--text-secondary)",fontWeight:600},children:t.label})]},i))})]}),c.length>5&&e.jsxs("div",{className:"dashboard-card",style:{background:"var(--card-bg)",border:"1px solid var(--gray-border)"},children:[e.jsx("h3",{style:{margin:"0 0 0.9375rem 0",color:"var(--text-primary)",fontSize:"1rem"},children:"ðŸ“ˆ Independence Trend (Last 7 Days)"}),(()=>{const t=[],i=new Date;for(let r=6;r>=0;r--){const s=new Date(i);s.setDate(s.getDate()-r);const d=s.toISOString().split("T")[0],l=c.filter(x=>x.date===d),h=l.length,p=l.filter(x=>!x.isPrompted).length,m=h>0?p/h*100:0;t.push({label:s.toLocaleDateString("en-US",{weekday:"short"}),rate:m,hasData:h>0})}const o=t.map((r,s)=>{const d=s/6*100,l=100-r.rate;return`${d},${l}`}).join(" ");return e.jsxs("div",{style:{position:"relative",height:"7.5rem",width:"100%"},children:[e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{width:"100%",height:"100%",overflow:"visible"},children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"var(--gray-border)",strokeWidth:"0.5"}),e.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"var(--gray-border)",strokeWidth:"0.5"}),e.jsx("line",{x1:"0",y1:"100",x2:"100",y2:"100",stroke:"var(--gray-border)",strokeWidth:"0.5"}),e.jsx("polyline",{points:o,fill:"none",stroke:"var(--success)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((r,s)=>e.jsx("circle",{cx:s/6*100,cy:100-r.rate,r:r.hasData?"3":"1.5",fill:r.hasData?"var(--success)":"var(--gray-border)"},s))]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:t.map((r,s)=>e.jsx("span",{children:r.label},s))})]})})()]}),v.length>0&&e.jsxs("div",{className:"dashboard-card",style:{background:"var(--gray-light)"},children:[e.jsx("h3",{style:{margin:"0 0 0.625rem 0",fontSize:"1rem",color:"var(--text-primary)"},children:"ðŸ† Most Used Items"}),v.map((t,i)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{width:"1.5rem",fontWeight:"bold",color:"var(--text-secondary)"},children:["#",i+1]}),e.jsx("span",{style:{flex:1,color:"var(--text-primary)",fontWeight:600},children:t.word}),e.jsx("span",{style:{background:"var(--primary-dark)",color:"white",padding:"0.25rem 0.75rem",borderRadius:"0.625rem",fontSize:"0.9rem",fontWeight:700},children:t.count})]},i))]}),b.length>0&&e.jsxs("div",{className:"dashboard-card",style:{background:"var(--bg-color)",border:"2px solid var(--fitz-noun)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",marginBottom:"0.9375rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"var(--text-primary)"},children:"â­ Favorite Usage"}),e.jsxs("span",{style:{background:"var(--fitz-noun)",color:"var(--fitz-noun-text)",padding:"0.25rem 0.75rem",borderRadius:"0.625rem",fontSize:"0.85rem",fontWeight:"bold",border:"1px solid var(--gray-border)"},children:[f," total uses"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(11.25rem, 1fr))",gap:"0.75rem"},children:b.map((t,i)=>{const o=f>0?((t.usageCount||0)/f*100).toFixed(0):0,r=t.lastUsed?new Date(t.lastUsed).toLocaleDateString():"Never";return e.jsxs("div",{style:{background:"var(--card-bg)",padding:"1rem",borderRadius:"0.75rem",boxShadow:"0 0.125rem 0.5rem rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"0.5rem",border:"1px solid var(--gray-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"2rem"},children:t.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"var(--text-primary)"},children:t.word}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:500},children:["Last: ",r]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{flex:1,height:"0.5rem",background:"var(--gray-light)",borderRadius:"0.25rem",overflow:"hidden"},children:e.jsx("div",{style:{width:`${o}%`,height:"100%",background:"var(--fitz-noun)",transition:"width 0.3s ease"}})}),e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"var(--text-primary)",minWidth:"2.5rem",textAlign:"right"},children:t.usageCount})]})]},i)})})]}),e.jsx("h2",{className:"dashboard-section-title",children:"ðŸƒ Communication Progress"}),e.jsxs("div",{className:"dashboard-stat-grid",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:[e.jsxs("div",{className:"dashboard-stat-card",style:{borderBottom:"4px solid var(--fitz-social)"},children:[e.jsx("div",{className:"dashboard-stat-value",style:{color:"var(--fitz-social)"},children:u}),e.jsx("div",{className:"dashboard-stat-label",children:"Independent"})]}),e.jsxs("div",{className:"dashboard-stat-card",style:{borderBottom:"4px solid var(--fitz-noun)"},children:[e.jsx("div",{className:"dashboard-stat-value",style:{color:"var(--warning)"},children:C}),e.jsx("div",{className:"dashboard-stat-label",children:"Prompted"})]}),e.jsxs("div",{className:"dashboard-stat-card",style:{borderBottom:"4px solid var(--fitz-verb)"},children:[e.jsxs("div",{className:"dashboard-stat-value",style:{color:"var(--fitz-verb)"},children:[k,"%"]}),e.jsx("div",{className:"dashboard-stat-label",children:"Independence"})]})]}),c.length>0&&e.jsxs("div",{className:"dashboard-card",style:{background:"var(--gray-light)"},children:[e.jsx("h3",{style:{margin:"0 0 0.625rem 0",fontSize:"1rem",color:"var(--text-primary)"},children:"Trial History (Last 20)"}),e.jsx("div",{style:{display:"flex",gap:"0.3125rem",flexWrap:"wrap"},children:c.slice(-20).map((t,i)=>e.jsx("div",{style:{width:"0.75rem",height:"1.5rem",background:t.isPrompted?"var(--warning)":"var(--fitz-social)",borderRadius:"0.1875rem"},title:t.isPrompted?"Prompted":"Independent"},i))})]})]})})};export{F as default};
//# sourceMappingURL=Dashboard-C5rMudTC.js.map
